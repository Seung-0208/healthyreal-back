<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ict.teamProject.exercise.ExerciseMapper">
	<!-- 경로 카테고리 등록 -->
	<insert id="uploadPath" parameterType="RoadPathDto">
		INSERT INTO ROAD_PATH VALUES(RPATH_SEQ.NEXTVAL, #{id}, #{rpath_time})
	</insert>
	<!-- 경로 좌표 등록 -->
	<insert id="uploadPathPoint" parameterType="List">
		INSERT ALL
		<foreach collection="list" item="item" separator="" index="idx">
			<if test="idx == 0">
				INTO ROAD_PATH VALUES(RPATH_SEQ.NEXTVAL, #{item.id}, #{item.rpath_time})
			</if>
			<if test="idx != 0">
				INTO ROAD_POINT VALUES(RPATH_SEQ.CURRVAL, #{item.lat}, #{item.lng}, #{item.order_num}, #{item.pointname})
			</if>
		</foreach>
		SELECT * FROM DUAL
	</insert>
</mapper>